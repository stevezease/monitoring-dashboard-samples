{
    "displayName": "Istio Mesh Dashboard",
    "dashboardFilters": [],
    "mosaicLayout": {
        "columns": 24,
        "tiles": [
            {
                "widget": {
                    "title": "",
                    "text": {
                        "content": "<div>\n  <div style=\"position: absolute; bottom: 0\">\n    <a href=\"https://istio.io\" target=\"_blank\" style=\"font-size: 30px; text-decoration: none; color: inherit\"><img src=\"https://istio.io/latest/img/istio-bluelogo-nobackground-unframed.svg\" style=\"height: 50px\"> Istio</a>\n  </div>\n  <div style=\"position: absolute; bottom: 0; right: 0; font-size: 15px\">\n    Istio is an <a href=\"https://github.com/istio/istio\" target=\"_blank\">open platform</a> that provides a uniform way to <a href=\"https://istio.io/docs/concepts/security/\" target=\"_blank\">secure</a>,\n    <a href=\"https://istio.io/docs/concepts/traffic-management/\" target=\"_blank\">connect</a>, and \n    <a href=\"https://istio.io/docs/concepts/observability/\" target=\"_blank\">monitor</a> microservices.\n    <br>\n    Need help? <a href=\"https://istio.io/get-involved/\" target=\"_blank\">Join the Istio community</a>.\n  </div>\n</div>",
                        "format": "MARKDOWN"
                    }
                },
                "xPos": 0,
                "yPos": 0,
                "height": 3,
                "width": 24
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "round(sum(irate(istio_requests_total{reporter=\"source\"}[1m])), 0.001)"
                        }
                    },
                    "title": "Global Request Volume"
                },
                "xPos": 0,
                "yPos": 3,
                "height": 3,
                "width": 6
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "sum(rate(istio_requests_total{reporter=\"source\", response_code!~\"5.*\"}[1m])) / sum(rate(istio_requests_total{reporter=\"source\"}[1m]))"
                        }
                    },
                    "title": "Global Success Rate (non-5xx responses)"
                },
                "xPos": 6,
                "yPos": 3,
                "height": 3,
                "width": 6
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "sum(irate(istio_requests_total{reporter=\"source\", response_code=~\"4.*\"}[1m]))"
                        }
                    },
                    "title": "4xxs"
                },
                "xPos": 12,
                "yPos": 3,
                "height": 3,
                "width": 6
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "sum(irate(istio_requests_total{reporter=\"source\", response_code=~\"5.*\"}[1m]))"
                        }
                    },
                    "title": "5xxs"
                },
                "xPos": 18,
                "yPos": 3,
                "height": 3,
                "width": 6
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "max(pilot_k8s_cfg_events{type=\"VirtualService\", event=\"add\"}) - (max(pilot_k8s_cfg_events{type=\"VirtualService\", event=\"delete\"}) or max(up * 0))"
                        }
                    },
                    "title": "Virtual Services"
                },
                "xPos": 0,
                "yPos": 6,
                "height": 3,
                "width": 6
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "max(pilot_k8s_cfg_events{type=\"DestinationRule\", event=\"add\"}) - (max(pilot_k8s_cfg_events{type=\"DestinationRule\", event=\"delete\"}) or max(up * 0))"
                        }
                    },
                    "title": "Destination Rules"
                },
                "xPos": 6,
                "yPos": 6,
                "height": 3,
                "width": 6
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "max(pilot_k8s_cfg_events{type=\"Gateway\", event=\"add\"}) - (max(pilot_k8s_cfg_events{type=\"Gateway\", event=\"delete\"}) or max(up * 0))"
                        }
                    },
                    "title": "Gateways"
                },
                "xPos": 12,
                "yPos": 6,
                "height": 3,
                "width": 6
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "max(pilot_k8s_cfg_events{type=\"WorkloadEntry\", event=\"add\"}) - (max(pilot_k8s_cfg_events{type=\"WorkloadEntry\", event=\"delete\"}) or max(up * 0))"
                        }
                    },
                    "title": "Workload Entries"
                },
                "xPos": 18,
                "yPos": 6,
                "height": 3,
                "width": 6
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "max(pilot_k8s_cfg_events{type=\"ServiceEntry\", event=\"add\"}) - (max(pilot_k8s_cfg_events{type=\"ServiceEntry\", event=\"delete\"}) or max(up * 0))"
                        }
                    },
                    "title": "Service Entries"
                },
                "xPos": 0,
                "yPos": 9,
                "height": 3,
                "width": 6
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "max(pilot_k8s_cfg_events{type=\"PeerAuthentication\", event=\"add\"}) - (max(pilot_k8s_cfg_events{type=\"PeerAuthentication\", event=\"delete\"}) or max(up * 0))"
                        }
                    },
                    "title": "PeerAuthentication Policies"
                },
                "xPos": 6,
                "yPos": 9,
                "height": 3,
                "width": 6
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "max(pilot_k8s_cfg_events{type=\"RequestAuthentication\", event=\"add\"}) - (max(pilot_k8s_cfg_events{type=\"RequestAuthentication\", event=\"delete\"}) or max(up * 0))"
                        }
                    },
                    "title": "RequestAuthentication Policies"
                },
                "xPos": 12,
                "yPos": 9,
                "height": 3,
                "width": 6
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "max(pilot_k8s_cfg_events{type=\"AuthorizationPolicy\", event=\"add\"}) - (max(pilot_k8s_cfg_events{type=\"AuthorizationPolicy\", event=\"delete\"}) or max(up * 0))"
                        }
                    },
                    "title": "Authorization Policies"
                },
                "xPos": 18,
                "yPos": 9,
                "height": 3,
                "width": 6
            },
            {
                "widget": {
                    "title": "HTTP/GRPC Workloads",
                    "timeSeriesTable": {
                        "columnSettings": [
                            {
                                "column": "value",
                                "visible": false
                            }
                        ],
                        "dataSets": [
                            {
                                "timeSeriesQuery": {
                                    "prometheusQuery": "label_join(sum(rate(istio_requests_total{reporter=\"source\", response_code=\"200\"}[1m])) by (destination_workload, destination_workload_namespace, destination_service), \"destination_workload_var\", \".\", \"destination_workload\", \"destination_workload_namespace\")"
                                }
                            }
                        ],
                        "metricVisualization": "NUMBER"
                    }
                },
                "xPos": 0,
                "yPos": 12,
                "height": 21,
                "width": 24
            },
            {
                "widget": {
                    "title": "TCP Workloads",
                    "timeSeriesTable": {
                        "columnSettings": [
                            {
                                "column": "value",
                                "visible": false
                            }
                        ],
                        "dataSets": [
                            {
                                "timeSeriesQuery": {
                                    "prometheusQuery": "label_join(sum(rate(istio_tcp_received_bytes_total{reporter=\"source\"}[1m])) by (destination_workload, destination_workload_namespace, destination_service), \"destination_workload_var\", \".\", \"destination_workload\", \"destination_workload_namespace\")"
                                }
                            }
                        ],
                        "metricVisualization": "NUMBER"
                    }
                },
                "xPos": 0,
                "yPos": 33,
                "height": 18,
                "width": 24
            },
            {
                "widget": {
                    "title": "Istio Components by Version",
                    "xyChart": {
                        "dataSets": [
                            {
                                "plotType": "LINE",
                                "timeSeriesQuery": {
                                    "prometheusQuery": "sum(istio_build) by (component, tag)"
                                },
                                "legendTemplate": "${labels.component}: ${labels.tag}"
                            }
                        ]
                    }
                },
                "xPos": 0,
                "yPos": 51,
                "height": 9,
                "width": 24
            }
        ]
    },
    "labels": {
        "goog-imported-via-script": "",
        "cloud-ops-grafana-importer": "",
        "goog-imported-grafana-dashboard": "",
        "goog-imported-grafana-revision-5": "",
        "goog-imported-grafana-id-7639": "",
        "goog-imported-grafana-file-name-7639_rev180": ""
    }
}