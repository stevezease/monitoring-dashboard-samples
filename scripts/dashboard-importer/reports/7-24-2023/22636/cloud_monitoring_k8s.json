{
    "displayName": "Cluster Monitoring for Kubernetes",
    "mosaicLayout": {
        "columns": 24,
        "tiles": [
            {
                "widget": {
                    "scorecard": {
                        "gaugeView": {
                            "lowerBound": 0,
                            "upperBound": 100
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "sum (container_memory_working_set_bytes{id=\"/\",kubernetes_io_hostname=~\"^*$\"}) / sum (machine_memory_bytes{kubernetes_io_hostname=~\"^*$\"}) * 100"
                        }
                    },
                    "title": "Cluster memory usage"
                },
                "xPos": 0,
                "yPos": 1,
                "height": 5,
                "width": 8
            },
            {
                "widget": {
                    "scorecard": {
                        "gaugeView": {
                            "lowerBound": 0,
                            "upperBound": 100
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "sum (rate (container_cpu_usage_seconds_total{id=\"/\",kubernetes_io_hostname=~\"^*$\"}[${__interval}])) / sum (machine_cpu_cores{kubernetes_io_hostname=~\"^*$\"}) * 100"
                        }
                    },
                    "title": "Cluster CPU usage (${__interval} avg)"
                },
                "xPos": 8,
                "yPos": 1,
                "height": 5,
                "width": 8
            },
            {
                "widget": {
                    "scorecard": {
                        "gaugeView": {
                            "lowerBound": 0,
                            "upperBound": 100
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "sum (container_fs_usage_bytes{id=\"/\"}) / sum (container_fs_limit_bytes{id=\"/\"}) * 100"
                        }
                    },
                    "title": "Cluster filesystem usage"
                },
                "xPos": 16,
                "yPos": 1,
                "height": 5,
                "width": 8
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "sum (container_memory_working_set_bytes{id=\"/\",kubernetes_io_hostname=~\"^*$\"})"
                        }
                    },
                    "title": "Used"
                },
                "xPos": 0,
                "yPos": 6,
                "height": 3,
                "width": 4
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "sum (machine_memory_bytes{kubernetes_io_hostname=~\"^*$\"})"
                        }
                    },
                    "title": "Total"
                },
                "xPos": 4,
                "yPos": 6,
                "height": 3,
                "width": 4
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "sum (rate (container_cpu_usage_seconds_total{id=\"/\",kubernetes_io_hostname=~\"^*$\"}[${__interval}]))"
                        }
                    },
                    "title": "Used"
                },
                "xPos": 8,
                "yPos": 6,
                "height": 3,
                "width": 4
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "sum (machine_cpu_cores{kubernetes_io_hostname=~\"^*$\"})"
                        }
                    },
                    "title": "Total"
                },
                "xPos": 12,
                "yPos": 6,
                "height": 3,
                "width": 4
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "sum (container_fs_usage_bytes{id=\"/\"})"
                        }
                    },
                    "title": "Used"
                },
                "xPos": 16,
                "yPos": 6,
                "height": 3,
                "width": 4
            },
            {
                "widget": {
                    "scorecard": {
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [],
                        "timeSeriesQuery": {
                            "prometheusQuery": "sum (container_fs_limit_bytes{id=\"/\"})"
                        }
                    },
                    "title": "Total"
                },
                "xPos": 20,
                "yPos": 6,
                "height": 3,
                "width": 4
            },
            {
                "widget": {
                    "title": "Pods memory usage",
                    "xyChart": {
                        "dataSets": [
                            {
                                "plotType": "STACKED_AREA",
                                "timeSeriesQuery": {
                                    "prometheusQuery": "sum (container_memory_working_set_bytes{image!=\"\",kubernetes_io_hostname=~\"^*$\"}) by (pod_name)"
                                },
                                "legendTemplate": "{{ pod_name }}"
                            }
                        ]
                    }
                },
                "xPos": 0,
                "yPos": 10,
                "height": 7,
                "width": 24
            },
            {
                "widget": {
                    "title": "Pods CPU usage (${__interval} avg)",
                    "xyChart": {
                        "dataSets": [
                            {
                                "plotType": "STACKED_AREA",
                                "timeSeriesQuery": {
                                    "prometheusQuery": "sum (rate (container_cpu_usage_seconds_total{image!=\"\",kubernetes_io_hostname=~\"^*$\"}[${__interval}])) by (pod_name)"
                                },
                                "legendTemplate": "{{ pod_name }}"
                            }
                        ]
                    }
                },
                "xPos": 0,
                "yPos": 18,
                "height": 7,
                "width": 24
            },
            {
                "widget": {
                    "title": "Network I/O pressure",
                    "xyChart": {
                        "dataSets": [
                            {
                                "plotType": "LINE",
                                "timeSeriesQuery": {
                                    "prometheusQuery": "sum (rate (container_network_receive_bytes_total{kubernetes_io_hostname=~\"^*$\"}[${__interval}]))"
                                },
                                "legendTemplate": "Received"
                            },
                            {
                                "plotType": "LINE",
                                "timeSeriesQuery": {
                                    "prometheusQuery": "- sum (rate (container_network_transmit_bytes_total{kubernetes_io_hostname=~\"^*$\"}[${__interval}]))"
                                },
                                "legendTemplate": "Sent"
                            }
                        ]
                    }
                },
                "xPos": 0,
                "yPos": 26,
                "height": 5,
                "width": 24
            },
            {
                "widget": {
                    "title": "Pods network I/O (${__interval} avg)",
                    "xyChart": {
                        "dataSets": [
                            {
                                "plotType": "LINE",
                                "timeSeriesQuery": {
                                    "prometheusQuery": "sum (rate (container_network_receive_bytes_total{image!=\"\",kubernetes_io_hostname=~\"^*$\"}[${__interval}])) by (pod_name)"
                                },
                                "legendTemplate": "-> {{ pod_name }}"
                            },
                            {
                                "plotType": "LINE",
                                "timeSeriesQuery": {
                                    "prometheusQuery": "- sum (rate (container_network_transmit_bytes_total{image!=\"\",kubernetes_io_hostname=~\"^*$\"}[${__interval}])) by (pod_name)"
                                },
                                "legendTemplate": "<- {{ pod_name }}"
                            }
                        ]
                    }
                },
                "xPos": 0,
                "yPos": 31,
                "height": 7,
                "width": 24
            }
        ]
    }
}